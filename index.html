<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pictureâ€‘Word Match</title>
  <style>
    *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
    body{margin:0;background:#f0f8ff;display:flex;justify-content:center;align-items:flex-start;padding:20px;min-height:100vh}
    h1{text-align:center;margin-top:0}
    button{cursor:pointer;border:none;border-radius:8px;padding:10px 18px;font-size:1rem;background:#2196f3;color:#fff}
    #modeBtns{display:flex;justify-content:center;gap:20px;margin-top:24px;flex-wrap:wrap}
    #gameControls{display:flex;justify-content:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}
    #timer{font-weight:bold;font-size:1.1rem;color:#d32f2f;min-width:60px;text-align:center}
    #gameArea{display:flex;justify-content:center;align-items:flex-start;gap:32px;flex-wrap:wrap;margin:0 auto}
    #gameArea.horizontal{flex-wrap:nowrap}

    /* Each area fixed to 2 columns */
    .area{display:grid;grid-template-columns:repeat(2,minmax(70px,1fr));gap:12px;width:100%;max-width:300px;min-height:280px;margin:0 16px}
    .img-card,.word-card{width:100%;height:100px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;user-select:none;touch-action:none;transition:transform .25s}
    .img-card{font-size:2.2rem;background:#fff3e0;border:3px solid #ffb74d}
    .word-card{font-size:.9rem;background:#e3f2fd;border:3px solid #64b5f6;cursor:grab;padding:6px;text-align:center;line-height:1.15}
    .matched{opacity:.35;cursor:default}
    @keyframes flash{from{background:#c8e6c9}to{background:#fff3e0}}
    @keyframes shake{10%,90%{transform:translateX(-4px)}20%,80%{transform:translateX(4px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
    .correct-anim{animation:flash .3s ease-out}
    .wrong-anim{animation:shake .35s ease-in-out}

    /* Mobile adjustments: preserve 2 columns within each area */
    @media(max-width:480px){
      .area{gap:8px;min-height:auto;max-width:45%;}
      .img-card,.word-card{height:80px}
      .img-card{font-size:1.8rem}
      .word-card{font-size:.75rem;padding:4px}
    }
  </style>
</head>
<body>
  <div id="startScreen">
    <h1>Pictureâ€‘Word Match</h1>
    <div id="modeBtns">
      <button id="practiceBtn">PracticeÂ Mode</button>
      <button id="trialBtn">30â€‘SetÂ TrialÂ Mode</button>
    </div>
  </div>

  <div id="gameScreen" style="display:none;flex-direction:column;align-items:center;width:100%">
    <div id="gameControls"></div>
    <div id="gameArea">
      <div id="imageArea" class="area"></div>
      <div id="wordArea" class="area"></div>
    </div>
  </div>

  <script>
    // Data & Emoji
    const categories = {
      Food: ["apple","bread","milk","rice","egg","apples","eggs"],
      Animals: ["dog","cat","bird","fish","elephant","dogs","cats","birds","fish","elephants"],
      School: ["book","pen","pencil","chair","bag","books","pens","pencils","chairs","bags"],
      Family: ["mother","father","sister","brother","grandpa"],
      Clothes: ["shirt","shirts","pants","shoes","coat","coats","hat","hats"],
      Colors: ["red","blue","green","yellow","black","white","orange","purple","brown"],
      Numbers: ["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"],
      Weather: ["sunny","rainy","windy","cloudy","snowy"],
      Actions: ["I sleep.","I run.","I drink juice.","I brush my teeth.","I eat sushi."],
      Feelings: ["I am happy.","I am sad.","I am tired.","I am hungry.","I am angry."]
    };
    const emoji = {
      apple: "ðŸŽ", apples: "ðŸŽðŸŽ", bread: "ðŸž", milk: "ðŸ¥›", rice: "ðŸš", egg: "ðŸ¥š", eggs: "ðŸ¥šðŸ¥š",
      dog: "ðŸ¶", dogs: "ðŸ¶ðŸ¶", cat: "ðŸ±", cats: "ðŸ±ðŸ±", bird: "ðŸ¦", birds: "ðŸ¦ðŸ¦", fish: "ðŸŸ", elephant: "ðŸ˜", elephants: "ðŸ˜ðŸ˜",
      book: "ðŸ“•", books: "ðŸ“•ðŸ“•", pen: "ðŸ–Šï¸", pens: "ðŸ–Šï¸ðŸ–Šï¸", pencil: "âœï¸", pencils: "âœï¸âœï¸", chair: "ðŸª‘", chairs: "ðŸª‘ðŸª‘", bag: "ðŸŽ’", bags: "ðŸŽ’ðŸŽ’",
      mother: "ðŸ‘©", father: "ðŸ‘¨", sister: "ðŸ‘§", brother: "ðŸ‘¦", grandpa: "ðŸ‘´",
      shirt: "ðŸ‘•", shirts: "ðŸ‘•ðŸ‘•", pants: "ðŸ‘–", shoes: "ðŸ‘ŸðŸ‘Ÿ", coat: "ðŸ§¥", coats: "ðŸ§¥ðŸ§¥", hat: "ðŸŽ©", hats: "ðŸŽ©ðŸŽ©",
      red: "ðŸŸ¥", blue: "ðŸŸ¦", green: "ðŸŸ©", yellow: "ðŸŸ¨", black: "â¬›", white: "â¬œ", orange: "ðŸŸ§", purple: "ðŸŸª", brown: "ðŸŸ«",
      one: "1ï¸âƒ£", two: "2ï¸âƒ£", three: "3ï¸âƒ£", four: "4ï¸âƒ£", five: "5ï¸âƒ£", six: "6ï¸âƒ£", seven: "7ï¸âƒ£", eight: "8ï¸âƒ£", nine: "9ï¸âƒ£", ten: "ðŸ”Ÿ", eleven: "1ï¸âƒ£1ï¸âƒ£", twelve: "1ï¸âƒ£2ï¸âƒ£",
      sunny: "â˜€ï¸", rainy: "ðŸŒ§ï¸", windy: "ðŸŒ¬ï¸", cloudy: "â˜ï¸", snowy: "â„ï¸",
      "I sleep.": "ðŸ˜´", "I run.": "ðŸƒ", "I drink juice.": "ðŸ§ƒ", "I brush my teeth.": "ðŸª¥ðŸ¦·", "I eat sushi.": "ðŸ£ðŸ¥¢",
      "I am happy.": "ðŸ˜Š", "I am sad.": "ðŸ˜¢", "I am tired.": "ðŸ¥±", "I am hungry.": "ðŸ¤¤", "I am angry.": "ðŸ˜ "
    };

    // Helpers
    const noArt = ["bread","milk","rice","pants","shoes", ...categories.Colors, ...categories.Numbers, ...categories.Weather, ...categories.Actions, ...categories.Feelings];
    function addArt(w){ if(noArt.includes(w)||w.endsWith('s')) return w; return (/^[aeiou]/i.test(w) ? 'an ' : 'a ') + w }
    function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; }}

    // DOM refs & State
    const practiceBtn = document.getElementById('practiceBtn');
    const trialBtn = document.getElementById('trialBtn');
    const startScr = document.getElementById('startScreen');
    const gameScr = document.getElementById('gameScreen');
    const gameCtr = document.getElementById('gameControls');
    const imgArea = document.getElementById('imageArea');
    const wordArea = document.getElementById('wordArea');
    const gameArea = document.getElementById('gameArea');
    let mode = 'practice', currentCat = 'Food', elapsed = 0, timerId = null;
    let dragEl = null, startParent = null, offX = 0, offY = 0, pairsLeft = 0;

    // Navigation
    practiceBtn.onclick = ()=>{ mode='practice'; currentCat='Food'; startGame(); };
    trialBtn.onclick   = ()=>{ mode='trial'; startGame(); };
    function startGame(){
      startScr.style.display='none';
      gameScr.style.display='flex';
      clearInterval(timerId);
      elapsed = 0;
      gameArea.classList.toggle('horizontal', mode==='trial');
      buildControls();
      buildBoard();
      if(mode==='trial') startClock();
    }
    function goHome(){ clearInterval(timerId); gameScr.style.display='none'; startScr.style.display='block'; }

    // Controls
    function buildControls(){
      gameCtr.innerHTML = '';
      if(mode==='practice'){
        const sel=document.createElement('select');
        Object.keys(categories).forEach(c=>{ const o=document.createElement('option'); o.value=c; o.textContent=c; sel.appendChild(o); });
        sel.value=currentCat;
        sel.onchange = e=>{ currentCat=e.target.value; buildBoard(); };
        gameCtr.appendChild(sel);
      } else {
        const t=document.createElement('div'); t.id='timer'; t.textContent='0'; gameCtr.appendChild(t);
      }
      const back=document.createElement('button'); back.textContent='Back'; back.onclick=goHome; gameCtr.appendChild(back);
    }

    // Board creation
    function buildBoard(){
      let words;
      if(mode==='practice'){
        words = [...categories[currentCat]];
      } else {
        const all=Object.values(categories).flat();
        shuffle(all);
        words = all.slice(0,30);
      }
      pairsLeft = words.length;
      imgArea.innerHTML=''; wordArea.innerHTML='';
      words.forEach(w=>{
        const ic=document.createElement('div'); ic.className='img-card'; ic.dataset.word=w; ic.textContent=emoji[w]||w; imgArea.appendChild(ic);
      });
      shuffle(words);
      words.forEach(w=>{
        const wc=document.createElement('div'); wc.className='word-card'; wc.dataset.word=w; wc.textContent=addArt(w);
        wc.addEventListener('pointerdown', pointerDown);
        wordArea.appendChild(wc);
      });
    }

    // Drag & Drop
    function pointerDown(e){
      dragEl=e.currentTarget; startParent=dragEl.parentElement;
      offX=dragEl.offsetWidth/2; offY=dragEl.offsetHeight/2;
      dragEl.style.position='absolute'; dragEl.style.zIndex='1000';
      move(e.pageX,e.pageY);
      dragEl.setPointerCapture(e.pointerId);
      dragEl.addEventListener('pointermove',pointerMove);
      dragEl.addEventListener('pointerup',pointerUp);
    }
    function pointerMove(e){ if(!dragEl) return; move(e.pageX,e.pageY); }
    function move(x,y){ dragEl.style.left=x-offX+'px'; dragEl.style.top=y-offY+'px'; }
    function pointerUp(e){
      if(!dragEl) return;
      dragEl.releasePointerCapture(e.pointerId);
      dragEl.removeEventListener('pointermove',pointerMove);
      dragEl.style.display='none';
      const drop=document.elementFromPoint(e.clientX,e.clientY);
      dragEl.style.display='';
      let target=drop;
      while(target&&!target.classList.contains('img-card')) target=target.parentElement;
      target? handleMatch(target,dragEl.dataset.word) : resetDrag();
      dragEl=null;
    }
    function resetDrag(){
      if(!dragEl) return;
      dragEl.style.position='relative'; dragEl.style.left=''; dragEl.style.top=''; dragEl.style.zIndex='';
      startParent.appendChild(dragEl);
    }

    // Matching
    function handleMatch(target,word){
      if(word===target.dataset.word){
        animate(target,true);
        const pair=document.querySelector(`.word-card[data-word="${word}"]`);
        pair.removeEventListener('pointerdown',pointerDown);
        if(mode==='trial'){ pair.style.display='none'; target.style.display='none'; }
        pairsLeft--;
        if(mode==='trial' && pairsLeft===0) endTrial();
      } else {
        animate(target,false);
        resetDrag();
      }
    }
    function animate(el,ok){
      el.classList.add(ok?'correct-anim':'wrong-anim');
      setTimeout(()=>el.classList.remove(ok?'correct-anim':'wrong-anim'),350);
    }

    // Timer for Trial
    function startClock(){
      const timer=document.getElementById('timer');
      timer.textContent='0';
      timerId=setInterval(()=>{
        elapsed++;
        timer.textContent=elapsed;
      },1000);
    }
    function endTrial(){
      clearInterval(timerId);
      alert(`Finished 30 pairs in ${elapsed} seconds!`);
      goHome();
    }
  </script>
</body>
</html>
