<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pictureâ€‘Word Match (Touchâ€‘Friendly)</title>
<style>
  *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
  body{margin:0;padding:20px;background:#f0f8ff}
  h1{text-align:center;margin-top:0}
  #controls{display:flex;justify-content:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}
  #game-area{display:flex;justify-content:center;align-items:flex-start;gap:36px;flex-wrap:wrap;max-width:1300px;margin:0 auto}
  .area{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;width:600px;min-height:300px}
  .img-card,.word-card{width:120px;height:120px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;user-select:none;touch-action:none}
  .img-card{font-size:2.6rem;background:#fff3e0;border:3px solid #ffb74d;color:#000}
  .word-card{font-size:.95rem;background:#e3f2fd;border:3px solid #64b5f6;cursor:grab;padding:6px;text-align:center;line-height:1.15}
  .matched{opacity:.35;cursor:default}
  @media (max-width:600px){
    #game-area{gap:20px}
    .area{width:100%;grid-template-columns:repeat(auto-fill,minmax(90px,1fr));min-height:240px}
    .img-card,.word-card{width:90px;height:90px}
    .img-card{font-size:2rem}
    .word-card{font-size:.8rem;padding:4px}
  }
</style>
</head>
<body>
<h1>Pictureâ€‘Word Match</h1>
<div id="controls">
  <select id="categorySelect"></select>
  <button id="startBtn">Start</button>
</div>
<div id="game-area">
  <div id="imageArea" class="area"></div>
  <div id="wordArea" class="area"></div>
</div>
<script>
/**************** Data *****************/
const categories={
  Food:["apple","bread","milk","rice","egg","apples","eggs"],
  Animals:["dog","cat","bird","fish","elephant","dogs","cats","birds","fish","elephants"],
  School:["book","pen","pencil","chair","bag","books","pens","pencils","chairs","bags"],
  Family:["mother","father","sister","brother","grandpa"],
  Clothes:["shirt","shirts","pants","shoes","coat","coats","hat","hats"],
  Colors:["red","blue","green","yellow","black","white","orange","purple","brown"],
  Numbers:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"],
  Weather:["sunny","rainy","windy","cloudy","snowy"],
  Actions:["I sleep.","I run.","I drink juice.","I brush my teeth.","I eat sushi."],
  Feelings:["I am happy.","I am sad.","I am tired.","I am hungry.","I am angry."]
};
/**************** Emoji map *****************/
const emoji={
  apple:"ðŸŽ",apples:"ðŸŽðŸŽ",bread:"ðŸž",milk:"ðŸ¥›",rice:"ðŸš",egg:"ðŸ¥š",eggs:"ðŸ¥šðŸ¥š",
  dog:"ðŸ¶",dogs:"ðŸ¶ðŸ¶",cat:"ðŸ±",cats:"ðŸ±ðŸ±",bird:"ðŸ¦",birds:"ðŸ¦ðŸ¦",fish:"ðŸŸ",elephant:"ðŸ˜",elephants:"ðŸ˜ðŸ˜",
  book:"ðŸ“•",books:"ðŸ“•ðŸ“•",pen:"ðŸ–Šï¸",pens:"ðŸ–Šï¸ðŸ–Šï¸",pencil:"âœï¸",pencils:"âœï¸âœï¸",chair:"ðŸª‘",chairs:"ðŸª‘ðŸª‘",bag:"ðŸŽ’",bags:"ðŸŽ’ðŸŽ’",
  mother:"ðŸ‘©",father:"ðŸ‘¨",sister:"ðŸ‘§",brother:"ðŸ‘¦",grandpa:"ðŸ‘´",
  shirt:"ðŸ‘•",shirts:"ðŸ‘•ðŸ‘•",pants:"ðŸ‘–",shoes:"ðŸ‘ŸðŸ‘Ÿ",coat:"ðŸ§¥",coats:"ðŸ§¥ðŸ§¥",hat:"ðŸŽ©",hats:"ðŸŽ©ðŸŽ©",
  red:"ðŸŸ¥",blue:"ðŸŸ¦",green:"ðŸŸ©",yellow:"ðŸŸ¨",black:"â¬›",white:"â¬œ",orange:"ðŸŸ§",purple:"ðŸŸª",brown:"ðŸŸ«",
  one:"1ï¸âƒ£",two:"2ï¸âƒ£",three:"3ï¸âƒ£",four:"4ï¸âƒ£",five:"5ï¸âƒ£",six:"6ï¸âƒ£",seven:"7ï¸âƒ£",eight:"8ï¸âƒ£",nine:"9ï¸âƒ£",ten:"ðŸ”Ÿ",eleven:"1ï¸âƒ£1ï¸âƒ£",twelve:"1ï¸âƒ£2ï¸âƒ£",
  sunny:"â˜€ï¸",rainy:"ðŸŒ§ï¸",windy:"ðŸŒ¬ï¸",cloudy:"â˜ï¸",snowy:"â„ï¸",
  "I sleep.":"ðŸ˜´","I run.":"ðŸƒ","I drink juice.":"ðŸ§ƒ","I brush my teeth.":"ðŸª¥ðŸ¦·","I eat sushi.":"ðŸ£ðŸ¥¢",
  "I am happy.":"ðŸ˜Š","I am sad.":"ðŸ˜¢","I am tired.":"ðŸ¥±","I am hungry.":"ðŸ¤¤","I am angry.":"ðŸ˜ "
};
/************ Helpers *************/
const noArticle=["bread","milk","rice","pants","shoes",...categories.Colors,...categories.Numbers,...categories.Weather,...categories.Actions,...categories.Feelings];
const vowels=["a","e","i","o","u"];
const addArticle=w=>(!noArticle.includes(w)&&!w.endsWith("s"))?(vowels.includes(w[0].toLowerCase())?"an ":"a ")+w:w;
const shuffle=a=>{for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}};

/************ DOM refs *************/
const sel=document.getElementById('categorySelect');
const btn=document.getElementById('startBtn');
const imgArea=document.getElementById('imageArea');
const wordArea=document.getElementById('wordArea');
Object.keys(categories).forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;sel.appendChild(o);});

/******** Drag state *************/
let dragEl=null,startX=0,startY=0,offsetX=0,offsetY=0,startParent=null,pairsLeft=0;

function onPointerDown(e){dragEl=e.currentTarget;startParent=dragEl.parentElement;offsetX=dragEl.offsetWidth/2;offsetY=dragEl.offsetHeight/2;dragEl.style.position='absolute';dragEl.style.zIndex='1000';moveAt(e.pageX,e.pageY);dragEl.setPointerCapture(e.pointerId);dragEl.addEventListener('pointermove',onPointerMove);dragEl.addEventListener('pointerup',onPointerUp);} 
function onPointerMove(e){moveAt(e.pageX,e.pageY);} 
function moveAt(x,y){dragEl.style.left=x-offsetX+'px';dragEl.style.top=y-offsetY+'px';}
function onPointerUp(e){
  dragEl.releasePointerCapture(e.pointerId);
  dragEl.removeEventListener('pointermove',onPointerMove);
  // Temporarily hide dragged element to detect underlying img-card
  const prevDisplay=dragEl.style.display;
  dragEl.style.display='none';
  const drop=document.elementFromPoint(e.clientX,e.clientY);
  dragEl.style.display=prevDisplay;
  let target=drop;
  while(target&&!target.classList.contains('img-card')) target=target.parentElement;
  if(target){
    handleDrop(target,dragEl.dataset.word);
  }else{
    resetDrag();
  }
  dragEl=null;
}
function resetDrag(){if(!dragEl) return;dragEl.style.position='relative';dragEl.style.left='';dragEl.style.top='';dragEl.style.zIndex='';startParent.appendChild(dragEl);} 

function handleDrop(targetCard,word){if(word===targetCard.dataset.word){targetCard.classList.add('matched');const pair=document.querySelector(`.word-card[data-word="${word}"]`);pair.classList.add('matched');pair.removeEventListener('pointerdown',onPointerDown);pairsLeft--;speak(word);if(pairsLeft===0) setTimeout(()=>alert('Great! You matched all words!'),200);}else{resetDrag();speak(targetCard.dataset.word,true);}}

/******** Speech *************/
function speak(txt,err=false){if('speechSynthesis'in window){window.speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(addArticle(txt));u.lang='en-US';u.rate=err?1.3:1;window.speechSynthesis.speak(u);}}

/******** Build board *************/
function buildBoard(){const cat=sel.value;const words=[...categories[cat]];pairsLeft=words.length;imgArea.innerHTML='';wordArea.innerHTML='';words.forEach(w=>{const c=document.createElement('div');c.className='img-card';c.textContent=emoji[w]||w;c.dataset.word=w;imgArea.appendChild(c);});shuffle(words);words.forEach(w=>{const c=document.createElement('div');c.className='word-card';c.textContent=addArticle(w);c.dataset.word=w;c.addEventListener('pointerdown',onPointerDown);wordArea.appendChild(c);});}

btn.addEventListener('click',buildBoard);
buildBoard();
</script>
</body>
</html>
