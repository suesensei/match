<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pictureâ€‘Word Match (CEFRÂ A1)</title>
<style>
  *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
  body{margin:0;padding:20px;background:#f0f8ff}
  h1{text-align:center;margin-top:0}
  #controls{display:flex;justify-content:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}
  #game-area{display:flex;justify-content:center;gap:40px;flex-wrap:wrap}
  .area{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:600px}
  .img-card,.word-card{width:120px;height:120px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;user-select:none}
  .img-card{font-size:2.8rem;background:#fff3e0;border:3px solid #ffb74d;color:#000}
  .word-card{font-size:1rem;background:#e3f2fd;border:3px solid #64b5f6;cursor:grab;padding:6px;text-align:center;line-height:1.2}
  .matched{opacity:0.4;cursor:default}
</style>
</head>
<body>
<h1>Pictureâ€‘Word Match</h1>
<div id="controls">
  <select id="categorySelect"></select>
  <button id="startBtn">Start</button>
</div>
<div id="game-area">
  <div id="imageArea" class="area"></div>
  <div id="wordArea" class="area"></div>
</div>
<script>
/* ------------ Data ----------------*/
const categories = {
  "Food": ["apple","bread","milk","rice","egg","apples","eggs"],
  "Animals": ["dog","cat","bird","fish","elephant","dogs","cats","birds","fish","elephants"],
  "School": ["book","pen","pencil","chair","bag","books","pens","pencils","chairs","bags"],
  "Family": ["mother","father","sister","brother","grandpa"],
  "Clothes": ["shirt","shirts","pants","shoes","coat","coats","hat","hats"],
  "Colors": ["red","blue","green","yellow","black","white","orange","purple","brown"],
  "Numbers": ["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"],
  "Weather": ["sunny","rainy","windy","cloudy","snowy"],
  "Actions": ["I sleep.","I run.","I drink juice.","I read a book.","I eat sushi."],
  "Feelings": ["I am happy.","I am sad.","I am tired.","I am hungry.","I am angry."]
};

/* Emoji placeholders. */
const emoji = {
  // Food
  apple:"ðŸŽ",apples:"ðŸŽðŸŽ",bread:"ðŸž",milk:"ðŸ¥›",rice:"ðŸš",egg:"ðŸ¥š",eggs:"ðŸ¥šðŸ¥š",
  // Animals
  dog:"ðŸ¶",dogs:"ðŸ¶ðŸ¶",cat:"ðŸ±",cats:"ðŸ±ðŸ±",bird:"ðŸ¦",birds:"ðŸ¦ðŸ¦",fish:"ðŸŸ",elephant:"ðŸ˜",elephants:"ðŸ˜ðŸ˜",
  // School
  book:"ðŸ“•",books:"ðŸ“•ðŸ“•",pen:"ðŸ–Šï¸",pens:"ðŸ–Šï¸ðŸ–Šï¸",pencil:"âœï¸",pencils:"âœï¸âœï¸",chair:"ðŸª‘",chairs:"ðŸª‘ðŸª‘",bag:"ðŸŽ’",bags:"ðŸŽ’ðŸŽ’",
  // Family
  mother:"ðŸ‘©",father:"ðŸ‘¨",sister:"ðŸ‘§",brother:"ðŸ‘¦",grandpa:"ðŸ‘´",
  // Clothes
  shirt:"ðŸ‘•",shirts:"ðŸ‘•ðŸ‘•",pants:"ðŸ‘–",shoes:"ðŸ‘ŸðŸ‘Ÿ",coat:"ðŸ§¥",coats:"ðŸ§¥ðŸ§¥",hat:"ðŸŽ©",hats:"ðŸŽ©ðŸŽ©",
  // Colors
  red:"ðŸŸ¥",blue:"ðŸŸ¦",green:"ðŸŸ©",yellow:"ðŸŸ¨",black:"â¬›",white:"â¬œ",orange:"ðŸŸ§",purple:"ðŸŸª",brown:"ðŸŸ«",
  // Numbers
  one:"1ï¸âƒ£",two:"2ï¸âƒ£",three:"3ï¸âƒ£",four:"4ï¸âƒ£",five:"5ï¸âƒ£",six:"6ï¸âƒ£",seven:"7ï¸âƒ£",eight:"8ï¸âƒ£",nine:"9ï¸âƒ£",ten:"ðŸ”Ÿ",eleven:"1ï¸âƒ£1ï¸âƒ£",twelve:"1ï¸âƒ£2ï¸âƒ£",
  // Weather
  sunny:"â˜€ï¸",rainy:"ðŸŒ§ï¸",windy:"ðŸŒ¬ï¸",cloudy:"â˜ï¸",snowy:"â„ï¸",
  // Actions (sentences)
  "I sleep.":"ðŸ˜´","I run.":"ðŸƒ","I drink juice.":"ðŸ§ƒ","I read a book.":"ðŸ“–","I eat sushi.":"ðŸ£ðŸ¥¢",
  // Feelings (sentences)
  "I am happy.":"ðŸ˜Š","I am sad.":"ðŸ˜¢","I am tired.":"ðŸ¥±","I am hungry.":"ðŸ¤¤","I am angry.":"ðŸ˜ "
};
/* -------- Utility ---------------*/
const noArticleWords = [
  "bread","milk","rice","pants","shoes",
  ...categories.Colors,
  ...categories.Numbers,
  ...categories.Weather,
  ...categories.Actions,
  ...categories.Feelings
];
function isCountableSingular(word){
  return !noArticleWords.includes(word) && !word.endsWith("s");
}
function addArticle(word){
  if(!isCountableSingular(word)) return word;
  const vowels=["a","e","i","o","u"];
  return (vowels.includes(word[0].toLowerCase())?"an ":"a ")+word;
}
function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}}
/* -------- Elements ---------------*/
const categorySelect=document.getElementById("categorySelect");
const startBtn=document.getElementById("startBtn");
const imageArea=document.getElementById("imageArea");
const wordArea=document.getElementById("wordArea");

Object.keys(categories).forEach(cat=>{
  const opt=document.createElement("option");
  opt.value=cat;opt.textContent=cat;categorySelect.appendChild(opt);
});
/* -------- Handlers ---------------*/
let pairsLeft=0;
function startGame(){
  const cat=categorySelect.value;
  const words=[...categories[cat]];
  pairsLeft=words.length;
  imageArea.innerHTML="";
  wordArea.innerHTML="";
  words.forEach(w=>{
    const div=document.createElement("div");
    div.className="img-card";
    div.dataset.word=w;
    div.textContent=emoji[w]||w;
    div.addEventListener("dragover",e=>e.preventDefault());
    div.addEventListener("drop",handleDrop);
    imageArea.appendChild(div);
  });
  shuffle(words);
  words.forEach(w=>{
    const div=document.createElement("div");
    div.className="word-card";
    div.draggable=true;
    div.id="word-"+w;
    div.textContent=addArticle(w);
    div.addEventListener("dragstart",e=>{
      e.dataTransfer.setData("text/plain",w);
    });
    wordArea.appendChild(div);
  });
}
function handleDrop(e){
  const dragged=e.dataTransfer.getData("text/plain");
  if(!dragged)return;
  const target=this.dataset.word;
  const draggedEl=document.getElementById("word-"+dragged);
  if(dragged===target){
    this.classList.add("matched");
    draggedEl.classList.add("matched");
    draggedEl.draggable=false;
    pairsLeft--; speakWord(dragged);
    if(pairsLeft===0){
      setTimeout(()=>alert("Great! You matched all words!"),200);
    }
  }else{
    speakWord(target,true);
  }
}
function speakWord(base,error=false){
  if('speechSynthesis'in window){
    window.speechSynthesis.cancel();
    const utter=new SpeechSynthesisUtterance(addArticle(base));
    utter.lang='en-US';
    utter.pitch=1;
    utter.rate=error?1.2:1;
    window.speechSynthesis.speak(utter);
  }
}
/* -------- Events ----------------*/
startBtn.addEventListener('click',startGame);
startGame();
</script>
</body>
</html>
