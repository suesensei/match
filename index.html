<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Picture‑Word Match (CEFR A1) – Touch Friendly</title>
<style>
  *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif;touch-action:none}
  body{margin:0;padding:20px;background:#f0f8ff}
  h1{text-align:center;margin-top:0}
  #controls{display:flex;justify-content:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}
  #game-area{display:flex;justify-content:center;gap:40px;flex-wrap:wrap;position:relative}
  .area{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;max-width:600px}
  .img-card,.word-card{width:120px;height:120px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;user-select:none}
  .img-card{font-size:2.8rem;background:#fff3e0;border:3px solid #ffb74d;color:#000;position:relative}
  .word-card{font-size:1rem;background:#e3f2fd;border:3px solid #64b5f6;cursor:grab;padding:6px;text-align:center;line-height:1.1;position:relative;touch-action:none}
  .matched{opacity:0.35;cursor:default}
</style>
</head>
<body>
<h1>Picture‑Word Match</h1>
<div id="controls">
  <select id="categorySelect"></select>
  <button id="startBtn">Start</button>
</div>
<div id="game-area">
  <div id="imageArea" class="area"></div>
  <div id="wordArea" class="area"></div>
</div>
<script>
/*************** Data *****************/
const categories={
  Food:["apple","bread","milk","rice","egg","apples","eggs"],
  Animals:["dog","cat","bird","fish","elephant","dogs","cats","birds","fish","elephants"],
  School:["book","pen","pencil","chair","bag","books","pens","pencils","chairs","bags"],
  Family:["mother","father","sister","brother","grandpa"],
  Clothes:["shirt","shirts","pants","shoes","coat","coats","hat","hats"],
  Colors:["red","blue","green","yellow","black","white","orange","purple","brown"],
  Numbers:["one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve"],
  Weather:["sunny","rainy","windy","cloudy","snowy"],
  Actions:["I sleep.","I run.","I drink juice.","I brush my teeth.","I eat sushi."],
  Feelings:["I am happy.","I am sad.","I am tired.","I am hungry.","I am angry."]
};
/*************** Emoji map *****************/
const emoji={
  apple:"🍎",apples:"🍎🍎",bread:"🍞",milk:"🥛",rice:"🍚",egg:"🥚",eggs:"🥚🥚",
  dog:"🐶",dogs:"🐶🐶",cat:"🐱",cats:"🐱🐱",bird:"🐦",birds:"🐦🐦",fish:"🐟",elephant:"🐘",elephants:"🐘🐘",
  book:"📕",books:"📕📕",pen:"🖊️",pens:"🖊️🖊️",pencil:"✏️",pencils:"✏️✏️",chair:"🪑",chairs:"🪑🪑",bag:"🎒",bags:"🎒🎒",
  mother:"👩",father:"👨",sister:"👧",brother:"👦",grandpa:"👴",
  shirt:"👕",shirts:"👕👕",pants:"👖",shoes:"👟👟",coat:"🧥",coats:"🧥🧥",hat:"🎩",hats:"🎩🎩",
  red:"🟥",blue:"🟦",green:"🟩",yellow:"🟨",black:"⬛",white:"⬜",orange:"🟧",purple:"🟪",brown:"🟫",
  one:"1️⃣",two:"2️⃣",three:"3️⃣",four:"4️⃣",five:"5️⃣",six:"6️⃣",seven:"7️⃣",eight:"8️⃣",nine:"9️⃣",ten:"🔟",eleven:"1️⃣1️⃣",twelve:"1️⃣2️⃣",
  sunny:"☀️",rainy:"🌧️",windy:"🌬️",cloudy:"☁️",snowy:"❄️",
  "I sleep.":"😴","I run.":"🏃","I drink juice.":"🧃","I brush my teeth.":"🪥🦷","I eat sushi.":"🍣🥢",
  "I am happy.":"😊","I am sad.":"😢","I am tired.":"🥱","I am hungry.":"🤤","I am angry.":"😠"
};
/******** Utility for articles ***********/
const noArt=["bread","milk","rice","pants","shoes",...categories.Colors,...categories.Numbers,...categories.Weather,...categories.Actions,...categories.Feelings];
const vowels=["a","e","i","o","u"];
function addArticle(w){return(!noArt.includes(w)&&!w.endsWith("s"))?(vowels.includes(w[0].toLowerCase())?"an ":"a ")+w:w;}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}
/******** Elements ***********/
const sel=document.getElementById('categorySelect');
const btn=document.getElementById('startBtn');
const imgArea=document.getElementById('imageArea');
const wordArea=document.getElementById('wordArea');
Object.keys(categories).forEach(c=>{const o=document.createElement('option');o.value=c;o.textContent=c;sel.appendChild(o);});
/******** Drag vars ***********/
let dragEl=null,offsetX=0,offsetY=0,startParent=null,pairsLeft=0;
function pointerDown(e){
  // support mouse, touch, stylus
  dragEl=e.currentTarget;
  startParent=dragEl.parentElement;
  offsetX=dragEl.clientWidth/2;
  offsetY=dragEl.clientHeight/2;
  dragEl.style.position='absolute';
  dragEl.style.zIndex='1000';
  moveAt(e.pageX,e.pageY);
  document.addEventListener('pointermove',pointerMove);
  dragEl.setPointerCapture(e.pointerId);
}
function pointerMove(e){
  moveAt(e.pageX,e.pageY);
}
function moveAt(pageX,pageY){
  dragEl.style.left=(pageX-offsetX)+'px';
  dragEl.style.top=(pageY-offsetY)+'px';
}
function pointerUp(e){
  if(!dragEl) return;
  dragEl.releasePointerCapture(e.pointerId);
  document.removeEventListener('pointermove',pointerMove);
  const dropEl=document.elementFromPoint(e.clientX,e.clientY);
  let target=dropEl;
  while(target && !target.classList.contains('img-card')){
    target=target.parentElement;
  }
  if(target){
    handleCustomDrop(target,dragEl.dataset.word);
  }else{
    resetDrag();
  }
  dragEl=null;
}
function resetDrag(){
  dragEl.style.position='relative';
  dragEl.style.left='';
  dragEl.style.top='';
  dragEl.style.zIndex='';
  startParent.appendChild(dragEl);
function handleCustomDrop(targetWordEl,draggedWord){const matchTarget=targetWordEl.dataset.word;if(draggedWord===matchTarget){targetWordEl.classList.add('matched');const card=document.querySelector(`#wordArea [data-word='${draggedWord}']`)||dragEl;card.classList.add('matched');card.removeEventListener('pointerdown',pointerDown);pairsLeft--;speakWord(draggedWord);if(pairsLeft===0)setTimeout(()=>alert('Great! You matched all words!'),200);}else{speakWord(matchTarget,true);resetDrag();}}
/******** Speech ***********/
function speakWord(txt,err=false){if('speechSynthesis'in window){window.speechSynthesis.cancel();const u=new SpeechSynthesisUtterance(addArticle(txt));u.lang='en-US';u.rate=err?1.2:1;window.speechSynthesis.speak(u);}}
/******** Build board ***********/
function startGame(){const cat=sel.value;const words=[...categories[cat]];pairsLeft=words.length;imgArea.innerHTML='';wordArea.innerHTML='';
 words.forEach(w=>{const d=document.createElement('div');d.className='img-card';d.dataset.word=w;d.textContent=emoji[w]||w;imgArea.appendChild(d);});
 shuffle(words);
 words.forEach(w=>{const d=document.createElement('div');d.className='word-card';d.dataset.word=w;d.textContent=addArticle(w);d.addEventListener('pointerdown',pointerDown);d.addEventListener('pointerup',pointerUp);wordArea.appendChild(d);});}
btn.addEventListener('click',startGame);
startGame();
</script>
</body>
</html>
